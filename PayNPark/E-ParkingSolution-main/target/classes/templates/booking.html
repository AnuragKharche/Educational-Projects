<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<link href="/css/style.css" rel="stylesheet">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<head>
  <meta charset="UTF-8">
  <title>Booking Page</title>


</head>


<!--The nav bar-->
<nav class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="/indexDriver">
      <img src="/images/logo.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
      E-Parking Solution
    </a>
    <ul class="nav justify-content-end">
      <li class="nav-item">
        <a class="nav-link" href="/indexDriver" style="color: darkgrey">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house"
            viewBox="0 0 16 16">
            <path
              d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z" />
          </svg>
          Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/booking" style="color: white">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-plus"
            viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z" />
            <path
              d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z" />
            <path
              d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z" />
          </svg>
          Book</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/myBookings" style="color: darkgrey">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-journal-bookmark-fill" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M6 1h6v7a.5.5 0 0 1-.757.429L9 7.083 6.757 8.43A.5.5 0 0 1 6 8V1z" />
            <path
              d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z" />
            <path
              d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z" />
          </svg>
          My Bookings</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/driverInbox" style="color: darkgrey">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-inbox"
            viewBox="0 0 16 16">
            <path
              d="M4.98 4a.5.5 0 0 0-.39.188L1.54 8H6a.5.5 0 0 1 .5.5 1.5 1.5 0 1 0 3 0A.5.5 0 0 1 10 8h4.46l-3.05-3.812A.5.5 0 0 0 11.02 4H4.98zm9.954 5H10.45a2.5 2.5 0 0 1-4.9 0H1.066l.32 2.562a.5.5 0 0 0 .497.438h12.234a.5.5 0 0 0 .496-.438L14.933 9zM3.809 3.563A1.5 1.5 0 0 1 4.981 3h6.038a1.5 1.5 0 0 1 1.172.563l3.7 4.625a.5.5 0 0 1 .105.374l-.39 3.124A1.5 1.5 0 0 1 14.117 13H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .106-.374l3.7-4.625z" />
          </svg>
          Inbox</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/logout" style="color: darkgrey">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-door-open"
            viewBox="0 0 16 16">
            <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z" />
            <path
              d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117zM11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5zM4 1.934V15h6V1.077l-6 .857z" />
          </svg>
          Logout</a>
      </li>
    </ul>
  </div>
</nav>



<body style="Background-color:#8dd5d862"><br>

  <div class="container">
    <hr>

    <div class="row">
      <div class="col-md-6 offset-md-3">
        <p class="text-center"><strong>Current Address:</strong> <span th:text="${address}"></span></p>
        <div class="text-center">
          <button type="button" class="btn btn-primary mb-4" data-toggle="modal" data-target="#update-address-modal">Not
            correct?</button>
        </div>
      </div>
    </div>

    <div class="modal fade" id="update-address-modal" tabindex="-1" aria-labelledby="update-address-modal-label"
      aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="update-address-modal-label">Enter New Address</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form action="/update-address" method="post">
            <div class="modal-body">
              <div class="form-group">
                <label for="address">New Address:</label>
                <input type="text" class="form-control" id="address" name="address" th:value="${user.address}" />
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary">Update Address</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div th:if="${message}" class="alert alert-success alert-dismissible text-center mx-auto" role="alert"
    style="max-width: 400px;">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
        aria-hidden="true">&times;</span></button>
    <p th:text="${message}"></p>
  </div>
  <script>
    $(document).ready(function () {
      $('.cp-row').click(function () {
        var url = $(this).data('href');
        window.location.href = url;
      });
    });
  </script>

  <script>
    var changeAddressBtn = document.getElementById("change-address-btn");
    var changeAddressForm = document.getElementById("change-address-form");

    changeAddressBtn.addEventListener("click", function () {
      changeAddressBtn.style.display = "none";
      changeAddressForm.style.display = "block";
    });
  </script>

  <div class="container">
    <h1>Car Parks</h1>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>
            <a>Distance in miles</a>
          </th>
          <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=name&sortDir=' + ${reverseSortDir}}">Name</a>
          </th>
          <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=address&sortDir=' + ${reverseSortDir}}">Address</a>
          </th>
          <th>
            <a th:href="@{'/page/' + ${currentPage} + '?sortField=disabledSpaces&sortDir=' + ${reverseSortDir}}">Disabled
              Spaces</a>
          </th>
          <th>Parking Spaces</th>
        </tr>
      </thead>
      <tbody>
        <tr class="cp-row" th:each="carPark : ${carPark}"
          th:attr="data-href=@{/booking/{id_cp}(id_cp=${carPark.id_cp})}">
          <td th:text="${#numbers.formatDecimal(carPark.distanceInMiles, 1, 2)} + ' miles away'">Distance in Miles</td>
          <td th:text="${carPark.name}">Name</td>
          <td>
            <a th:href="@{'https://www.google.com/maps?q=' + ${#strings.replace(carPark.address, ' ', '+')}}"
              target="_blank" onclick="event.stopPropagation();">
              <span th:text="${carPark.address}"></span>
            </a>
          </td>
          <td th:text="${carPark.disabledSpaces}">Disabled</td>
          <td th:text="${carPark.parkingSpace.size()}+' spaces'">Count</td>
        </tr>
      </tbody>
    </table>
  </div>


  <style>
    .container {
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #ffffff;
      border: 1px solid #cccccc;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 24px;
      color: #333333;
      margin-bottom: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th,
    td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #cccccc;
    }

    th {
      font-size: 18px;
      color: #3498db;
    }

    td {
      font-size: 16px;
      color: #666666;
    }

    tbody tr:hover {
      background-color: #f5f5f5;
      cursor: pointer;
    }

    .pagination {
      display: inline-block;
      margin: 0;
    }

    .pagination li {
      display: inline-block;
      margin: 0 5px;
    }

    .pagination a {
      color: #007bff;
    }

    .pagination .page-link {
      border-radius: 0;
    }

    .pagination .page-item.active .page-link {
      background-color: #007bff;
      border-color: #007bff;
    }

    .pagination .page-link:hover {
      background-color: #f2f2f2;
    }

    .pagination .disabled .page-link {
      color: #6c757d;
    }

    .pagination .disabled .
  </style>

  <div class="container mt-3 text-center">
    <div th:if="${totalPages > 1}">
      <p class="text-muted mb-2">Number of Car Parks available: [[${totalItems}]]</p>
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          <li class="page-item">
            <a class="page-link" th:if="${currentPage > 1}"
              th:href="@{'/page/' + ${currentPage - 1}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchTerm=' + ${searchTerm}}">Previous</a>
            <span class="page-link" th:unless="${currentPage > 1}">Previous</span>
          </li>
          <li class="page-item" th:if="${currentPage - 1 > 2}">
            <a class="page-link"
              th:href="@{'/page/1' + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchTerm=' + ${searchTerm}}">1</a>
          </li>
          <li class="page-item disabled" th:if="${currentPage - 1 > 2}"><span class="page-link">...</span></li>
         
          <th:block th:each="i : ${#numbers.sequence(0, 2)}">
            <th:block th:with="page=${currentPage - 1 + i}">
              <li class="page-item" th:if="${page > 0 and page <= totalPages}">
                <a class="page-link" th:classappend="${page == currentPage} ? 'active' : ''"
                  th:href="@{'/page/' + ${page} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchTerm=' + ${searchTerm}}"
                  th:text="${page}"></a>
              </li>
            </th:block>
          </th:block>
          <li class="page-item disabled" th:if="${currentPage + 1 < totalPages - 1}"><span class="page-link">...</span>
          </li>
          <li class="page-item" th:if="${currentPage + 1 < totalPages - 1}">
            <a class="page-link"
              th:href="@{'/page/' + ${totalPages}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchTerm=' + ${searchTerm}}">[[${totalPages}]]</a>
          </li>
          <li class="page-item">
            <a class="page-link" th:if="${currentPage < totalPages}"
              th:href="@{'/page/' + ${currentPage + 1}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchTerm=' + ${searchTerm}}">Next</a>
            <span class="page-link" th:unless="${currentPage < totalPages}">Next</span>
          </li>
        </ul>
      </nav>
    </div>
  </div>


  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twbs-pagination/1.3.1/jquery.twbsPagination.min.js"></script>
  <script type="text/javascript" src="js/style.js"></script>





</body>

</html>